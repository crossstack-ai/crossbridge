# CrossBridge Configuration
# Continuous Intelligence Layer Configuration

crossbridge:
  # Lifecycle mode: migration | observer
  # - migration: Initial test discovery and migration
  # - observer: Post-migration continuous intelligence (default)
  mode: observer
  
  # Application/Product Version Tracking
  # Used for coverage-by-version analysis in Grafana
  application:
    # Product/application name (e.g., "MyWebApp", "PaymentAPI")
    # Can be overridden by PRODUCT_NAME or CROSSBRIDGE_PRODUCT_NAME env var
    product_name: ${PRODUCT_NAME:-MyApplication}
    
    # Application version being tested (e.g., "2.1.0", "v3.0.0-beta")
    # Can be overridden by APP_VERSION or CROSSBRIDGE_APP_VERSION env var
    # CI/CD Tip: Set from git tag - export APP_VERSION=$(git describe --tags)
    application_version: ${APP_VERSION:-1.0.0}
    
    # Environment name (e.g., "dev", "staging", "production")
    # Can be overridden by ENVIRONMENT or CROSSBRIDGE_ENVIRONMENT env var
    environment: ${ENVIRONMENT:-dev}
  
  # Hook configuration
  hooks:
    enabled: true  # Enable/disable framework hooks
    
  # Persistence configuration
  persistence:
    postgres:
      enabled: true
      host: ${CROSSBRIDGE_DB_HOST:-10.60.67.247}
      port: ${CROSSBRIDGE_DB_PORT:-5432}
      database: ${CROSSBRIDGE_DB_NAME:-cbridge-unit-test-db}
      user: ${CROSSBRIDGE_DB_USER:-postgres}
      password: ${CROSSBRIDGE_DB_PASSWORD:-admin}
  
  # Observer mode settings
  observer:
    # Automatically detect new tests
    auto_detect_new_tests: true
    
    # Update coverage graph continuously
    update_coverage_graph: true
    
    # Detect test drift and changes
    detect_drift: true
    
    # Flaky test detection threshold
    flaky_threshold: 0.15  # 15% failure rate
    
  # AI & Intelligence features
  intelligence:
    # Enable AI-powered analysis
    ai_enabled: true
    
    # Missing coverage detection
    detect_coverage_gaps: true
    
    # Redundant test detection
    detect_redundant_tests: true
    
    # Risk-based execution recommendations
    risk_based_recommendations: true

# Framework-specific configurations
frameworks:
  pytest:
    enabled: true
    auto_instrument_api_calls: true
    auto_instrument_ui_interactions: false
    
  playwright:
    enabled: true
    capture_network_traffic: true
    
  robot:
    enabled: true
    track_keywords: true
    track_api_calls: true
