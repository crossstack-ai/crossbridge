# ============================================================================
# NOTICE: Unified Configuration Available (Recommended)
# ============================================================================
# This file serves as a TEMPLATE and FALLBACK only.
#
# RECOMMENDED APPROACH: Define rules in crossbridge.yml instead:
#
#   crossbridge:
#     intelligence:
#       rules:
#         restassured:
#           - id: REST_001
#             description: HTTP response errors
#             match_any:
#               - "status code"
#               - "HTTP"
#             failure_type: PRODUCT_DEFECT
#             confidence: 0.90
#             priority: 10
#
# This file is used as fallback ONLY if rules are not found in crossbridge.yml
# See: UNIFIED_CONFIGURATION_GUIDE.md for detailed documentation
# ============================================================================

# RestAssured Framework Classification Rules
# For Java REST API testing with RestAssured

# ============================================================================
# AUTOMATION DEFECTS - RestAssured-specific test automation issues
# ============================================================================

- id: REST_001
  description: JSON path or response parsing failures
  match_any:
    - "JsonPathException"
    - "Invalid JSON path"
    - "Failed to parse JSON"
    - "Cannot parse response"
    - "JsonParseException"
  failure_type: AUTOMATION_DEFECT
  confidence: 0.88
  priority: 12

- id: REST_002
  description: Schema validation failures in test setup
  match_any:
    - "JsonSchemaValidationException"
    - "Schema validation failed"
    - "matchesJsonSchema"
    - "Invalid schema"
  failure_type: AUTOMATION_DEFECT
  confidence: 0.85
  priority: 15

- id: REST_003
  description: Test data or request body construction issues
  match_any:
    - "Failed to serialize"
    - "ObjectMapper"
    - "SerializationException"
    - "Cannot construct instance"
  failure_type: AUTOMATION_DEFECT
  confidence: 0.83
  priority: 17

- id: REST_004
  description: Authentication or authorization setup issues
  match_any:
    - "auth()"
    - "authentication configuration"
    - "OAuth2"
    - "preemptive"
  requires_all:
    - "NullPointerException"
  failure_type: AUTOMATION_DEFECT
  confidence: 0.80
  priority: 20

# ============================================================================
# ENVIRONMENT ISSUES - Infrastructure and test environment problems
# ============================================================================

- id: REST_ENV_001
  description: Connection timeouts or network failures
  match_any:
    - "ConnectException"
    - "SocketTimeoutException"
    - "Connection refused"
    - "Connection timeout"
    - "UnknownHostException"
  failure_type: ENVIRONMENT_ISSUE
  confidence: 0.92
  priority: 8

- id: REST_ENV_002
  description: SSL/TLS certificate or secure connection issues
  match_any:
    - "SSLException"
    - "SSLHandshakeException"
    - "Certificate"
    - "PKIX path building failed"
  failure_type: ENVIRONMENT_ISSUE
  confidence: 0.90
  priority: 10

- id: REST_ENV_003
  description: API endpoint not available or unreachable
  match_any:
    - "404 Not Found"
    - "503 Service Unavailable"
    - "Connection timed out"
    - "No route to host"
  failure_type: ENVIRONMENT_ISSUE
  confidence: 0.85
  priority: 14

- id: REST_ENV_004
  description: Database or external service connectivity
  match_any:
    - "SQLException"
    - "Database connection"
    - "Redis"
    - "MongoDB"
    - "Could not connect to"
  failure_type: ENVIRONMENT_ISSUE
  confidence: 0.88
  priority: 12

# ============================================================================
# PRODUCT DEFECTS - API application failures
# ============================================================================

- id: REST_PROD_001
  description: Server errors (5xx responses)
  match_any:
    - "500 Internal Server Error"
    - "502 Bad Gateway"
    - "504 Gateway Timeout"
    - "Status code 5"
  failure_type: PRODUCT_DEFECT
  confidence: 0.95
  priority: 3

- id: REST_PROD_002
  description: API response validation failures
  match_any:
    - "expected"
    - "but was"
    - "AssertionError"
    - "equalTo"
    - "hasItems"
  excludes:
    - "timeout"
    - "connection"
  failure_type: PRODUCT_DEFECT
  confidence: 0.90
  priority: 6

- id: REST_PROD_003
  description: API business logic errors (4xx responses)
  match_any:
    - "400 Bad Request"
    - "401 Unauthorized"
    - "403 Forbidden"
    - "422 Unprocessable Entity"
  excludes:
    - "404 Not Found" # Often environment
  failure_type: PRODUCT_DEFECT
  confidence: 0.87
  priority: 9

- id: REST_PROD_004
  description: Unexpected API response structure
  match_any:
    - "Response body doesn't match"
    - "Missing required field"
    - "Unexpected field"
    - "Schema mismatch"
  failure_type: PRODUCT_DEFECT
  confidence: 0.88
  priority: 8

- id: REST_PROD_005
  description: Application exceptions in API response
  match_any:
    - "NullPointerException"
    - "IllegalArgumentException"
    - "RuntimeException"
  requires_all:
    - "Status code"
  excludes:
    - "auth()"
  failure_type: PRODUCT_DEFECT
  confidence: 0.85
  priority: 11

# ============================================================================
# CONFIGURATION ISSUES - Test configuration problems
# ============================================================================

- id: REST_CONFIG_001
  description: Base URI or endpoint configuration errors
  match_any:
    - "baseUri"
    - "basePath"
    - "RestAssured.baseURI"
    - "Invalid URL"
  failure_type: CONFIGURATION_ISSUE
  confidence: 0.88
  priority: 11

- id: REST_CONFIG_002
  description: Missing dependencies or classpath issues
  match_any:
    - "ClassNotFoundException"
    - "NoClassDefFoundError"
    - "Cannot find class"
  failure_type: CONFIGURATION_ISSUE
  confidence: 0.90
  priority: 10
